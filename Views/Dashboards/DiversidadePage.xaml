<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiApp1.Views.Dashboards.DiversidadePage"
             Title=""
             BackgroundColor="#F5F5F5"
             Shell.FlyoutBehavior="Disabled">

    <Shell.TitleView>
        <Grid ColumnDefinitions="Auto, *, Auto"
              Style="{StaticResource TitleViewGridStyle}"
              Margin="0" Padding="0">

            <ImageButton Grid.Column="0"
                         Source="seta_direita.png"
                         HeightRequest="44" WidthRequest="44"
                         BackgroundColor="Transparent"
                         Clicked="BotaoVoltarPainelGestao"/>

            <Label Grid.Column="1"
                   Text="Indicadores de Diversidade"
                   Style="{StaticResource TituloShellStyle}"/>

            <ImageButton Grid.Column="2"
                         Source="icone_menu.png"
                         HeightRequest="44" WidthRequest="44"
                         BackgroundColor="Transparent"/>
        </Grid>
    </Shell.TitleView>

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">

            <!-- Loading -->
            <ActivityIndicator IsRunning="{Binding IsLoading}" 
                             IsVisible="{Binding IsLoading}"
                             Color="#3B82F6"
                             HeightRequest="40"/>

            <!-- Seletor de Ano -->
            <Picker x:Name="PickerAno"
                    Title="Selecione o ano"
                    SelectedIndex="0"
                    SelectedIndexChanged="OnAnoSelecionado">
                <Picker.Items>
                    <x:String>2024</x:String>
                    <x:String>2023</x:String>
                    <x:String>2022</x:String>
                    <x:String>2021</x:String>
                    <x:String>2020</x:String>
                </Picker.Items>
            </Picker>

            <!-- Cards -->
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" 
                  ColumnSpacing="12" RowSpacing="12">

                <!-- Total Colaboradores -->
                <Frame Grid.Row="0" Grid.Column="0" CornerRadius="12" 
                       BackgroundColor="White" Padding="16" HasShadow="False">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="ðŸ‘¥" FontSize="32"/>
                        <Label Text="{Binding DadosGerais.TotalColaboradoresFormatado}" 
                               FontSize="32" FontAttributes="Bold"/>
                        <Label Text="Total Colaboradores" 
                               FontSize="14" TextColor="#6B7280"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Homens -->
                <Frame Grid.Row="0" Grid.Column="1" CornerRadius="12" 
                       BackgroundColor="White" Padding="16" HasShadow="False">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="â™‚ï¸" FontSize="32"/>
                        <Label Text="{Binding DadosGerais.PercentualHomensFormatado}" 
                               FontSize="32" FontAttributes="Bold" TextColor="#3B82F6"/>
                        <Label Text="Homens" 
                               FontSize="14" TextColor="#6B7280"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Mulheres -->
                <Frame Grid.Row="1" Grid.Column="0" CornerRadius="12" 
                       BackgroundColor="White" Padding="16" HasShadow="False">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="â™€ï¸" FontSize="32"/>
                        <Label Text="{Binding DadosGerais.PercentualMulheresFormatado}" 
                               FontSize="32" FontAttributes="Bold" TextColor="#EC4899"/>
                        <Label Text="Mulheres" 
                               FontSize="14" TextColor="#6B7280"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- NÃ£o Informado -->
                <Frame Grid.Row="1" Grid.Column="1" CornerRadius="12" 
                       BackgroundColor="White" Padding="16" HasShadow="False">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="â“" FontSize="32"/>
                        <Label Text="{Binding DadosGerais.PercentualNaoInformadoFormatado}" 
                               FontSize="32" FontAttributes="Bold"/>
                        <Label Text="NÃ£o Informado" 
                               FontSize="14" TextColor="#6B7280"/>
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- DistribuiÃ§Ã£o por GÃªnero -->
            <Frame CornerRadius="12" BackgroundColor="White" 
                   Padding="20" HasShadow="False">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ³ï¸â€ðŸŒˆ DistribuiÃ§Ã£o por GÃªnero" 
                           FontSize="18" FontAttributes="Bold"/>

                    <CollectionView ItemsSource="{Binding DistribuicoesGenero}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Label Text="{Binding Descricao}" 
                                       FontSize="14" 
                                       Margin="0,4"/>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Pessoas com DeficiÃªncia -->
            <Frame CornerRadius="12" BackgroundColor="White" 
                   Padding="20" HasShadow="False">
                <VerticalStackLayout Spacing="12">
                    <Label Text="â™¿ Pessoas com DeficiÃªncia" 
                           FontSize="18" FontAttributes="Bold"/>

                    <CollectionView ItemsSource="{Binding DistribuicoesPCD}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Label Text="{Binding DescricaoCompleta}" 
                                       FontSize="14" 
                                       Margin="0,4"/>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- RaÃ§a/Cor -->
            <Frame CornerRadius="12" BackgroundColor="White" 
                   Padding="20" HasShadow="False">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸŒ RaÃ§a/Cor" 
                           FontSize="18" FontAttributes="Bold"/>

                    <CollectionView ItemsSource="{Binding DistribuicoesRaca}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="120,*,60" Margin="0,4">
                                    <Label Grid.Column="0" 
                                           Text="{Binding Descricao}" 
                                           FontSize="14" 
                                           TextColor="#6B7280"
                                           VerticalOptions="Center"/>

                                    <Border Grid.Column="1"
                                            BackgroundColor="#3B82F6"
                                            HeightRequest="24"
                                            WidthRequest="{Binding LarguraBarra}"
                                            HorizontalOptions="Start"
                                            StrokeThickness="0"
                                            VerticalOptions="Center">
                                        <Border.StrokeShape>
                                            <RoundRectangle CornerRadius="4"/>
                                        </Border.StrokeShape>
                                    </Border>

                                    <Label Grid.Column="2" 
                                           Text="{Binding Percentual, StringFormat='{0:F1}%'}" 
                                           FontSize="14" 
                                           FontAttributes="Bold"
                                           TextColor="#1F2937"
                                           HorizontalOptions="End"
                                           VerticalOptions="Center"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Estado Civil -->
            <Frame CornerRadius="12" BackgroundColor="White" 
                   Padding="20" HasShadow="False">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ’ Estado Civil" 
                           FontSize="18" FontAttributes="Bold"/>

                    <CollectionView ItemsSource="{Binding DistribuicoesEstadoCivil}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Label Text="{Binding DescricaoCompleta}" 
                                       FontSize="14" 
                                       Margin="0,4"/>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>