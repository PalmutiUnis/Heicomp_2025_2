<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Heicomp_2025_2.Views.Dashboards.RotatividadePage"
             Title=""
             BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource FundoPaginaEscuro}}"
             Shell.FlyoutBehavior="Disabled">

    <!-- Layout do Shell NavBar -->
    <Shell.TitleView >
        <Grid ColumnDefinitions="Auto, *, Auto"
              Style="{StaticResource TitleViewGridStyle}"
              HorizontalOptions="Fill"
              VerticalOptions="Fill"
              Margin="0"
              Padding="0">
            <ImageButton Grid.Column="0"
                         Source="seta_direita.png"
                         HeightRequest="44"
                         WidthRequest="44"
                         BackgroundColor="Transparent"
                         Clicked="BotaoVoltarPainelGestao"
                         Margin="0"
                         Padding="0"
                         HorizontalOptions="Start"
                         VerticalOptions="Center"/>

            <Label Grid.Column="1"
                   Text="Rotatividade"
                   Style="{StaticResource TituloShellStyle}"
                   VerticalOptions="Center"
                   HorizontalOptions="Fill"/>

            <ImageButton Grid.Column="2"
                     Source="icone_menu.png"
                     HeightRequest="44"
                     WidthRequest="44"
                     BackgroundColor="Transparent"
                     Margin="0"
                     Padding="0"
                     HorizontalOptions="End"
                     VerticalOptions="Center"/>
        </Grid>
    </Shell.TitleView>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <!-- Indicador de Loading -->
            <ActivityIndicator IsRunning="{Binding IsLoading}"
                             IsVisible="{Binding IsLoading}"
                             Color="{StaticResource Primary}"
                             HeightRequest="50" />

            <!-- Conteúdo principal (visível quando não está loading) -->
            <VerticalStackLayout IsVisible="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}" Spacing="15">

                <!-- Card de Turnover (destaque) -->
                <Label Text="Taxa de Rotatividade"
                       Style="{StaticResource TextoTituloSecao}" />

                <Border Style="{StaticResource CardPadrao}" WidthRequest="398" HeightRequest="120">
                    <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center">
                        <Label Text="Turnover" Style="{StaticResource TextoSubtitulo}" HorizontalOptions="Center" />
                        <Label Text="{Binding Turnover}"
                               FontAttributes="Bold"
                               FontSize="36"
                               HorizontalOptions="Center"
                               TextColor="{StaticResource Primary}" />
                    </VerticalStackLayout>
                </Border>

                <!-- Cards de Métricas -->
                <Label Text="Métricas de Movimentação"
                       Style="{StaticResource TextoTituloSecao}"
                       Margin="0,10,0,0" />

                <HorizontalStackLayout Spacing="10">
                    <Border Style="{StaticResource CardPadrao}" WidthRequest="193" HeightRequest="102">
                        <VerticalStackLayout VerticalOptions="Center">
                            <Label Text="Admissões" Style="{StaticResource TextoSubtitulo}" />
                            <Label Text="{Binding Admissoes}" FontAttributes="Bold" FontSize="24" />
                        </VerticalStackLayout>
                    </Border>

                    <Border Style="{StaticResource CardPadrao}" WidthRequest="193" HeightRequest="102">
                        <VerticalStackLayout VerticalOptions="Center">
                            <Label Text="Desligamentos" Style="{StaticResource TextoSubtitulo}" />
                            <Label Text="{Binding Desligamentos}" FontAttributes="Bold" FontSize="24" />
                        </VerticalStackLayout>
                    </Border>
                </HorizontalStackLayout>

                <!-- Card de Total de Colaboradores -->
                <Border Style="{StaticResource CardPadrao}" WidthRequest="398" HeightRequest="102">
                    <VerticalStackLayout VerticalOptions="Center">
                        <Label Text="Total de Colaboradores" Style="{StaticResource TextoSubtitulo}" HorizontalOptions="Center" />
                        <Label Text="{Binding TotalColaboradores}" FontAttributes="Bold" FontSize="24" HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>